!function(n){"use strict";function t(n,t){for(var o=0,e=n.length;e>o;o++)if(t(n[o]))return n[o]}function o(n){return n}function e(n,t,e,r){e=void 0===e?o:e;for(var u,f=n&&n.length?[{pointer:n,offset:0}]:[],i=[];f.length;)for(u=f.pop();u.offset<u.pointer.length;){var d=u.pointer[u.offset],p=void 0===r?void 0:r(d),c=t(d);i.push(e(d,u.node,p,u.nodeId)),u.offset++,c&&(f.push(u),u={pointer:c,offset:0,node:d,nodeId:p})}return i}function r(n,o,e,r){return n=n||[],void 0===r?f.call(n,function(r,u){var f=t(n,function(n){return o(u,n)});return void 0===f?r.push(u):e(u,f),r},[]):(n=u.call(n,function(n){return{"in":n,out:r(n)}}),f.call(n,function(r,u){var f=t(n,function(n){return o(u["in"],n["in"])});return void 0===f?r.push(u.out):e(u.out,t(n,function(n){return n["in"]===f["in"]}).out),r},[]))}var u=Array.prototype.map,f=Array.prototype.reduce,i={flatten:e,unflatten:r};"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=i:n.uft=i}(this);